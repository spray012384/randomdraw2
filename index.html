<!-- v 0.8.13 -->

<div class="title-with-version">
  <h1>ğŸ¯ ë½‘ê¸°íŒ ì„¤ì •</h1>
  <span class="version-label">v 0.8.13</span>
</div>

<div class="main-setting-container">
  <!-- ìƒí’ˆ ì•ˆë‚´ ë¹„í™œì„±í™” (ìë™ ì²˜ë¦¬ë¨) -->

  <div class="row">
    <label for="horizontal">ê°€ë¡œ</label>
    <input type="number" id="horizontal" min="1" max="10" value="3">
  </div>

  <div class="row">
    <label for="vertical">ì„¸ë¡œ</label>
    <input type="number" id="vertical" min="1" max="10" value="3">
  </div>

  <div class="row">
    <label for="total">ë‹¹ì²¨ ê°œìˆ˜</label>
    <input type="number" id="total" min="1" value="1">
    <span class="error-text" id="total-error"></span>
  </div>

  <div class="row">
    <label>ë‹¹ì²¨ ìœ„ì¹˜ ì„¤ì •</label>
    <div class="button-group" id="position-type-group">
      <button type="button" id="random-position" class="selected">ëœë¤ ì§€ì •</button>
      <button type="button" id="manual-position">ì§ì ‘ ì§€ì •</button>
    </div>
  </div>

  <div id="manual-input-fields"></div>

  <div class="row">
    <button class="start-button">ì‹œì‘í•˜ê¸°</button>
    <button class="save-button">ì €ì¥í•˜ê¸°</button>
    <button class="reset-button">ì´ˆê¸°í™”</button>
  </div>
</div>

<div class="footer-version">v 0.8.13</div>

<script>
const horizontalInput = document.getElementById('horizontal');
const verticalInput = document.getElementById('vertical');
const totalInput = document.getElementById('total');
const totalErrorText = document.getElementById('total-error');

const positionTypeGroup = document.getElementById('position-type-group');
const manualInputFields = document.getElementById('manual-input-fields');

const manualPositionButton = document.getElementById('manual-position');
const randomPositionButton = document.getElementById('random-position');

let isManualPosition = false;

manualPositionButton.addEventListener('click', () => {
  isManualPosition = true;
  manualPositionButton.classList.add('selected');
  randomPositionButton.classList.remove('selected');
  renderManualPositionInputs();
});

randomPositionButton.addEventListener('click', () => {
  isManualPosition = false;
  randomPositionButton.classList.add('selected');
  manualPositionButton.classList.remove('selected');
  manualInputFields.innerHTML = '';
});

function validateTotalInput() {
  const h = parseInt(horizontalInput.value);
  const v = parseInt(verticalInput.value);
  const total = parseInt(totalInput.value);

  if (!h || !v || !total) {
    totalErrorText.textContent = '[ê°€ë¡œ, ì„¸ë¡œ, ë‹¹ì²¨ê°œìˆ˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.]';
    return false;
  }

  const maxAllowed = h * v - 1;
  if (total > maxAllowed) {
    totalErrorText.textContent = `[ë‹¹ì²¨ ê°œìˆ˜ëŠ” ìµœëŒ€ ${maxAllowed}ê°œê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤.]`;
    return false;
  }

  totalErrorText.textContent = '';
  return true;
}

[horizontalInput, verticalInput, totalInput].forEach(input => {
  input.addEventListener('input', validateTotalInput);
});

function renderManualPositionInputs() {
  if (!validateTotalInput()) return;

  const h = parseInt(horizontalInput.value);
  const v = parseInt(verticalInput.value);
  const total = parseInt(totalInput.value);

  manualInputFields.innerHTML = '';
  const title = document.createElement('div');
  title.innerHTML = '<strong>[ì§ì ‘ ë‹¹ì²¨ ìœ„ì¹˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”]</strong>';
  manualInputFields.appendChild(title);

  for (let i = 0; i < total; i++) {
    const row = document.createElement('div');
    row.className = 'manual-input-row';

    const label = document.createElement('label');
    label.textContent = `${i + 1}ë²ˆ ìœ„ì¹˜`;

    const input = document.createElement('input');
    input.type = 'text';
    input.placeholder = 'ì˜ˆ: 1,2 (ê°€ë¡œ1, ì„¸ë¡œ2)';
    input.name = `manual-position-${i}`;

    row.appendChild(label);
    row.appendChild(input);
    manualInputFields.appendChild(row);
  }
}
</script>

<!-- v 0.8.13 -->
